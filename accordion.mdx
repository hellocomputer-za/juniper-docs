# Accordion Widget Component

## Description

A responsive and accessible accordion component built with Bootstrap framework. This widget allows users to expand and collapse content sections, providing an elegant solution for organizing information in a space-efficient manner. The accordion uses Bootstrap's built-in JavaScript functionality and can be easily customized with SCSS variables and custom animations.

## HTML Structure

The accordion widget uses a custom structure with Bootstrap classes and AOS animations through Nunjucks templates:

```html
<section 
  {{ animations.el(data.widget) }} 
  {% if data.widget.animationEffects !== 'no-animation' %} 
    data-aos="{{ data.widget.animationEffects }}" 
  {% endif %} 
  {% if data.widget.advancedAnimation === true %} 
    data-aos-offset="{{ data.widget.animationOffset }}" 
    data-aos-delay="{{ data.widget.animationDelay }}" 
    data-aos-duration="{{ data.widget.animationDuration }}" 
    data-aos-easing="{{ data.widget.animationEasing }}" 
  {% endif %} 
  class="accordion-widget" 
  data-accordion-widget
>
  {% for item in data.widget.items %}
    <div class="accordion-btn py-4 px-2 border-bottom border-dark-subtle">
      <span class="lead fw-bold">{{ item.title }}</span>
      <i class="accordion-icon lead fw-bold bi-plus-lg"></i>
    </div>
    <div class="accordion-panel">
      <div class="accordion-inner-panel py-3">
        {% area item, 'content' %}
      </div>
    </div>
  {% endfor %}
</section>
```

### HTML Attributes Explanation

- `{{ animations.el(data.widget) }}`: Juniper UI animation element helper
- `data-aos`: AOS animation effect type (fade-up, slide-in, etc.)
- `data-aos-offset`: Pixel offset from the original trigger point
- `data-aos-delay`: Animation delay in milliseconds
- `data-aos-duration`: Animation duration in milliseconds
- `data-aos-easing`: Animation easing function
- `data-accordion-widget`: JavaScript selector for widget functionality
- `accordion-btn`: Clickable header that toggles the panel
- `accordion-panel`: Collapsible content container
- `accordion-inner-panel`: Inner content wrapper with padding
- `{% area item, 'content' %}`: Nunjucks area for editable content

## JavaScript Implementation

```javascript
// Initialize accordion with custom options
document.addEventListener('DOMContentLoaded', function() {
  // Custom accordion initialization
  const accordionElement = document.getElementById('accordionExample');
  
  // Listen for accordion events
  accordionElement.addEventListener('show.bs.collapse', function (event) {
    console.log('Panel opening:', event.target.id);
    
    // Add custom logic when panel opens
    const button = document.querySelector(`[data-bs-target="#${event.target.id}"]`);
    button.classList.add('opening');
  });
  
  accordionElement.addEventListener('shown.bs.collapse', function (event) {
    console.log('Panel opened:', event.target.id);
    
    // Remove loading class after animation
    const button = document.querySelector(`[data-bs-target="#${event.target.id}"]`);
    button.classList.remove('opening');
  });
  
  accordionElement.addEventListener('hide.bs.collapse', function (event) {
    console.log('Panel closing:', event.target.id);
  });
});

### JavaScript Events

Bootstrap accordion triggers several events you can listen for:

- `show.bs.collapse`: Fired immediately when panel starts to open
- `shown.bs.collapse`: Fired when panel is fully opened
- `hide.bs.collapse`: Fired immediately when panel starts to close
- `hidden.bs.collapse`: Fired when panel is fully closed

## SCSS Styling

Comprehensive SCSS for customizing the accordion appearance and behavior:

```scss
// Accordion Variables
$accordion-padding-y: 1rem !default;
$accordion-padding-x: 1.25rem !default;
$accordion-color: var(--bs-body-color) !default;
$accordion-bg: var(--bs-body-bg) !default;
$accordion-border-width: var(--bs-border-width) !default;
$accordion-border-color: var(--bs-border-color) !default;
$accordion-border-radius: var(--bs-border-radius) !default;
$accordion-inner-border-radius: subtract($accordion-border-radius, $accordion-border-width) !default;

$accordion-body-padding-y: $accordion-padding-y !default;
$accordion-body-padding-x: $accordion-padding-x !default;

$accordion-button-padding-y: $accordion-padding-y !default;
$accordion-button-padding-x: $accordion-padding-x !default;
$accordion-button-color: var(--bs-body-color) !default;
$accordion-button-bg: var(--bs-accordion-bg) !default;
$accordion-button-active-bg: var(--bs-primary-bg-subtle) !default;
$accordion-button-active-color: var(--bs-primary-text-emphasis) !default;

$accordion-button-focus-border-color: var(--bs-primary) !default;
$accordion-button-focus-box-shadow: 0 0 0 0.25rem rgba(var(--bs-primary-rgb), 0.25) !default;

$accordion-icon-width: 1.25rem !default;
$accordion-icon-color: $accordion-button-color !default;
$accordion-icon-active-color: $accordion-button-active-color !default;
$accordion-icon-transition: transform 0.2s ease-in-out !default;

// Custom Accordion Styles
.accordion {
  --bs-accordion-color: #{$accordion-color};
  --bs-accordion-bg: #{$accordion-bg};
  --bs-accordion-transition: color 0.15s ease-in-out, background-color 0.15s ease-in-out, border-color 0.15s ease-in-out, box-shadow 0.15s ease-in-out, border-radius 0.15s ease;
  --bs-accordion-border-color: #{$accordion-border-color};
  --bs-accordion-border-width: #{$accordion-border-width};
  --bs-accordion-border-radius: #{$accordion-border-radius};
  --bs-accordion-inner-border-radius: #{$accordion-inner-border-radius};
  --bs-accordion-btn-padding-x: #{$accordion-button-padding-x};
  --bs-accordion-btn-padding-y: #{$accordion-button-padding-y};
  --bs-accordion-btn-color: #{$accordion-button-color};
  --bs-accordion-btn-bg: #{$accordion-button-bg};
  --bs-accordion-btn-icon: #{escape-svg($accordion-button-icon)};
  --bs-accordion-btn-icon-width: #{$accordion-icon-width};
  --bs-accordion-btn-icon-transform: rotate(-180deg);
  --bs-accordion-btn-icon-transition: #{$accordion-icon-transition};
  --bs-accordion-btn-active-icon: #{escape-svg($accordion-button-active-icon)};
  --bs-accordion-btn-focus-border-color: #{$accordion-button-focus-border-color};
  --bs-accordion-btn-focus-box-shadow: #{$accordion-button-focus-box-shadow};
  --bs-accordion-body-padding-x: #{$accordion-body-padding-x};
  --bs-accordion-body-padding-y: #{$accordion-body-padding-y};
  --bs-accordion-active-color: #{$accordion-button-active-color};
  --bs-accordion-active-bg: #{$accordion-button-active-bg};

  // Enhanced accordion item styling
  .accordion-item {
    background-color: var(--bs-accordion-bg);
    border: var(--bs-accordion-border-width) solid var(--bs-accordion-border-color);
    margin-bottom: 0.5rem;
    border-radius: var(--bs-accordion-border-radius);
    overflow: hidden;
    transition: var(--bs-accordion-transition);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);

    &:first-of-type {
      border-top-left-radius: var(--bs-accordion-border-radius);
      border-top-right-radius: var(--bs-accordion-border-radius);
    }

    &:last-of-type {
      border-bottom-right-radius: var(--bs-accordion-border-radius);
      border-bottom-left-radius: var(--bs-accordion-border-radius);
    }

    &:hover {
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
      transform: translateY(-1px);
    }
  }

  // Enhanced button styling
  .accordion-button {
    position: relative;
    display: flex;
    align-items: center;
    width: 100%;
    padding: var(--bs-accordion-btn-padding-y) var(--bs-accordion-btn-padding-x);
    font-size: 1rem;
    font-weight: 600;
    color: var(--bs-accordion-btn-color);
    text-align: left;
    background-color: var(--bs-accordion-btn-bg);
    border: 0;
    border-radius: 0;
    overflow-anchor: none;
    transition: var(--bs-accordion-transition);

    &:not(.collapsed) {
      color: var(--bs-accordion-active-color);
      background-color: var(--bs-accordion-active-bg);
      box-shadow: inset 0 calc(-1 * var(--bs-accordion-border-width)) 0 var(--bs-accordion-border-color);

      &::after {
        background-image: var(--bs-accordion-btn-active-icon);
        transform: var(--bs-accordion-btn-icon-transform);
      }
    }

    // Icon styling
    &::after {
      flex-shrink: 0;
      width: var(--bs-accordion-btn-icon-width);
      height: var(--bs-accordion-btn-icon-width);
      margin-left: auto;
      content: "";
      background-image: var(--bs-accordion-btn-icon);
      background-repeat: no-repeat;
      background-size: var(--bs-accordion-btn-icon-width);
      transition: var(--bs-accordion-btn-icon-transition);
    }

    &:hover {
      z-index: 2;
      background-color: darken(var(--bs-accordion-btn-bg), 5%);
    }

    &:focus {
      z-index: 3;
      border-color: var(--bs-accordion-btn-focus-border-color);
      outline: 0;
      box-shadow: var(--bs-accordion-btn-focus-box-shadow);
    }

    // Custom icon animations
    i {
      transition: transform 0.3s ease;
      margin-right: 0.75rem;
      color: var(--bs-primary);
    }

    &.collapsed i {
      transform: rotate(0deg);
    }

    &:not(.collapsed) i {
      transform: rotate(180deg);
    }
  }

  // Enhanced body styling
  .accordion-body {
    padding: var(--bs-accordion-body-padding-y) var(--bs-accordion-body-padding-x);
    background-color: rgba(var(--bs-accordion-active-bg), 0.05);
    border-top: 1px solid var(--bs-accordion-border-color);

    // Typography enhancements
    p {
      margin-bottom: 1rem;
      line-height: 1.6;
    }

    ul, ol {
      margin-bottom: 1rem;
      padding-left: 1.5rem;
    }

    code {
      background-color: var(--bs-gray-100);
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      font-size: 0.875em;
    }

    .code-example {
      background-color: var(--bs-gray-900);
      color: var(--bs-gray-100);
      padding: 1rem;
      border-radius: 0.375rem;
      margin: 1rem 0;
      overflow-x: auto;

      pre {
        margin: 0;
        font-family: 'Monaco', 'Consolas', monospace;
        font-size: 0.875rem;
        line-height: 1.5;
      }
    }
  }
}

// Theme variations
.accordion-theme-primary {
  --bs-accordion-active-bg: var(--bs-primary-bg-subtle);
  --bs-accordion-active-color: var(--bs-primary-text-emphasis);
  
  .accordion-button:not(.collapsed) {
    box-shadow: inset 3px 0 0 var(--bs-primary);
  }
}

.accordion-theme-secondary {
  --bs-accordion-active-bg: var(--bs-secondary-bg-subtle);
  --bs-accordion-active-color: var(--bs-secondary-text-emphasis);
  
  .accordion-button:not(.collapsed) {
    box-shadow: inset 3px 0 0 var(--bs-secondary);
  }
}

.accordion-theme-success {
  --bs-accordion-active-bg: var(--bs-success-bg-subtle);
  --bs-accordion-active-color: var(--bs-success-text-emphasis);
  
  .accordion-button:not(.collapsed) {
    box-shadow: inset 3px 0 0 var(--bs-success);
  }
}

// Responsive adjustments
@media (max-width: 768px) {
  .accordion {
    .accordion-button {
      padding: 0.75rem 1rem;
      font-size: 0.9rem;
    }
    
    .accordion-body {
      padding: 0.75rem 1rem;
    }
  }
}

// Dark theme support
@media (prefers-color-scheme: dark) {
  .accordion {
    --bs-accordion-bg: #2b2b2b;
    --bs-accordion-border-color: #404040;
    --bs-accordion-btn-bg: #333333;
    --bs-accordion-active-bg: #404040;
  }
}

```

## Animations

The accordion widget utilizes AOS (Animate On Scroll) library through a Nunjucks template system for managing animations. The animations are imported and configured through the Juniper UI animations template.

### Nunjucks Animation Template Implementation

The widget template imports animations and configures them based on widget data:

```nunjucks
{# Import animations from Juniper UI #}
{% import "@juniper/ui/animations.html" as animations %}

<section 
  {{ animations.el(data.widget) }} 
  class="accordion-widget" 
  data-accordion-widget
>
  {% for item in data.widget.items %}
    <div class="accordion-btn py-4 px-2 border-bottom border-dark-subtle">
      <span class="lead fw-bold">{{ item.title }}</span>
      <i class="accordion-icon lead fw-bold bi-plus-lg"></i>
    </div>
    <div class="accordion-panel">
      <div class="accordion-inner-panel py-3">
        {% area item, 'content' %}
      </div>
    </div>
  {% endfor %}
</section>
```

### Animation Configuration Options

The widget supports various animation configurations through the data object:

### Available AOS Animation Effects

The widget supports all AOS animation effects:

#### Fade animations:
- `fade`
- `fade-up`
- `fade-down`
- `fade-left`
- `fade-right`
- `fade-up-right`
- `fade-up-left`
- `fade-down-right`
- `fade-down-left`

#### Flip animations:
- `flip-up`
- `flip-down`
- `flip-left`
- `flip-right`

#### Slide animations:
- `slide-up`
- `slide-down`
- `slide-left`
- `slide-right`

#### Zoom animations:
- `zoom-in`
- `zoom-in-up`
- `zoom-in-down`
- `zoom-in-left`
- `zoom-in-right`
- `zoom-out`
- `zoom-out-up`
- `zoom-out-down`
- `zoom-out-left`
- `zoom-out-right`
